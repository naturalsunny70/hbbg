<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <!-- 모바일에서 사용자 확대/축소를 막고, 초기 스케일을 1.0으로 설정 -->
  <meta name="viewport"
        content="width=device-width, initial-scale=1.0, user-scalable=no, maximum-scale=1.0" />
  <title>풍선 터트리기 - PC/모바일 구분</title>
  <style>
    /* 기본 스타일 */
    html, body {
      margin: 0; 
      padding: 0; 
      width: 100%; 
      height: 100%;
      /* 터치 시 줌/스크롤 방지 */
      touch-action: none;
      user-select: none;
      -webkit-user-select: none;
      overscroll-behavior: none;
      background: #000;
    }
    canvas {
      display: block;
      margin: 0 auto;
      background: #222;
    }
  </style>
  <!-- Phaser 3.60.0 Min (CDN 예시) / 필요 시 직접 파일로 가져오기 -->
  <script src="https://cdn.jsdelivr.net/npm/phaser@3.60.0/dist/phaser.min.js"></script>
</head>
<body>
<script>
// PC 환경 / 모바일 환경 구분 
function isMobile() {
  let ua = navigator.userAgent.toLowerCase();
  // 흔히 쓰는 간단한 정규식 예시
  return /android|iphone|ipad|ipod|blackberry|iemobile|opera mini|mobile/.test(ua);
}

/* 
  ========= PC 전용 씬 =========
  (마우스 클릭 위주로 작성)
*/
class PcBalloonScene extends Phaser.Scene {
  constructor() {
    super({ key: 'PcBalloonScene' });
  }
  preload() {
    // 예시: 풍선 이미지, 배경, 효과음 등 로드
    this.load.image('balloon', 'balloon.png'); 
    // ... 필요 자원
  }
  create() {
    // 화면 가운데 풍선 하나
    this.balloon = this.add.image(400, 300, 'balloon').setInteractive();
    // PC에서는 pointerdown(마우스 클릭) 시 풍선 파괴
    this.balloon.on('pointerdown', () => {
      this.popBalloon();
    });

    // 예시용 텍스트
    this.add.text(10, 10, 'PC 모드: 마우스 클릭으로 풍선 터뜨리기', 
      { font: '18px Arial', fill: '#fff' });
  }
  popBalloon() {
    // 풍선 터뜨리는 로직(애니메이션 / 파티클 등)
    this.balloon.setVisible(false);
    // ... 원하시는 로직
  }
  update() {
    // 필요 시 매 프레임 처리
  }
}

/* 
  ========= 모바일 전용 씬 =========
  (터치 이벤트에서 더블탭/스크롤 등이 발생하지 않도록 주의)
*/
class MobileBalloonScene extends Phaser.Scene {
  constructor() {
    super({ key: 'MobileBalloonScene' });
  }
  preload() {
    // 모바일용이라도 같은 리소스 사용 가능
    this.load.image('balloon', 'balloon.png');
  }
  create() {
    this.balloon = this.add.image(400, 300, 'balloon').setInteractive();

    // 모바일에서는 'pointerdown'은 터치 다운
    // 꼭 .setInteractive() 필요
    // 이 때, event.preventDefault() 등으로 기본동작 막음
    this.balloon.on('pointerdown', (pointer) => {
      // 더블탭 등 확대 방지 → Pointer 이벤트 옵션(Phaser에선 기본 방지됨)
      // 추가로, DOM 이벤트에 preventDefault() 쓰고 싶다면 document 레벨에서 적용 가능
      this.popBalloon();
    });

    // 예시용 텍스트
    this.add.text(10, 10, '모바일 모드: 터치해서 풍선 터뜨리기', 
      { font: '18px Arial', fill: '#fff' });
  }
  popBalloon() {
    this.balloon.setVisible(false);
    // ... 풍선 파괴 애니메이션 등
  }
  update() {}
}

/*
  ========== 게임 전체 설정 ==========
  PC → PcBalloonScene 
  모바일 → MobileBalloonScene
*/
let selectedScene = isMobile() ? MobileBalloonScene : PcBalloonScene;

const config = {
  type: Phaser.AUTO,
  width: 800,
  height: 600,
  scene: [ selectedScene ],
  // 디바이스 성능에 맞게 pixelArt나 물리엔진 사용 여부 등 세부 설정 가능
};

new Phaser.Game(config);
</script>
</body>
</html>
