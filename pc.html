<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>ìƒì¼ ì¶•í•˜ ê²Œì„ - All-In-One</title>
  <style>
    body { margin: 0; overflow: hidden; }
    canvas { display: block; }
  </style>
</head>
<body>
<!-- 
  1) Phaser 3.60.0 min ì½”ë“œ ë¶™ì—¬ë„£ê¸°
  - phaser.min.js íŒŒì¼ ì „ì²´ ë‚´ìš©ì„ ì•„ë˜ ì£¼ì„ ìœ„ì¹˜ì— ë³µì‚¬í•˜ì—¬ ë„£ìœ¼ì„¸ìš”.
-->
<script>
/* Phaser min ì½”ë“œ ìë¦¬
   ì˜ˆ) 
     !function(t,e){"use strict"; ... 
     (ì¤‘ëµ)
     ... this is the entire minified content ...
     ...
*/
</script>

<script>
/* 
  ==== Base64ë¡œ ì¸ë¼ì¸ëœ ê°„ë‹¨í•œ í”Œë ˆì´ìŠ¤í™€ë” ì´ë¯¸ì§€ & ì˜¤ë””ì˜¤ ====
  (í¬ê¸°ë¥¼ ì¤„ì´ê¸° ìœ„í•´ ë§¤ìš° ê°„ë‹¨í•œ ì´ë¯¸ì§€ë§Œ ì‚¬ìš©)
*/
const HOUSE_IMG = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAABkCAIAAABM5OhcAAABhUlEQVR4nO3aQUrDQABA0VS8nN7FbnuGbnuYns9FQEJT01T9qOl7q4FMYBafmSFk9/J2HOCnPf32AtgmYZEQFglhkRAWCWGREBYJYZEQFglhkRAWCWGReF5+fD4dhmF43R/HwTjOF8X/dyOsC2NV08jm44s5V9/67qr581YdhdNKLuq5Wsm0oWlV8+bYqlVh3bvHfMw/nw7zKHkE9x2F6003J4fgA9ot/0F69fI+D2V5K/rs1sWG3QgLvsZ3LBLCIiEsEsIiISwSwiIhLBLCIiEsEsIiISwSwiIhLBLCIiEsEsIiISwSwiIhLBLCIiEsEsIiISwSwiIhLBLCIiEsEsIiISwSwiIhLBLCIiEsEsIiISwSwiIhLBLCIiEsEsIiISwSwiIhLBLCIiEsEsIiISwSwiIhLBLCIiEsEsIiISwSwiIhLBLCIiEsEsIiISwSwiIhLBLCIvEOiQ5ISBbp1FAAAAAASUVORK5CYII=";
const CAKE_IMG  = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAABkCAIAAABM5OhcAAABi0lEQVR4nO3aTWrCYBRAUS3dXN1LM3UNTl2M6+sgoCGxxv5cCs05Iw1PcHD5fCTu395PO/htL3/9BfifhEVCWCSERUJYJIRFQlgkhEVCWCSERUJYJF5/+PnL+Ti+OAyeOXKzHtY1nd29eg7DaToAo5Wwxmhm9Xx2Sl2HH8ywEc/uWIfhNC1mVs/d68sZtuPLy/uDXO4eYGzTs2FdzscxlOlptJyZvh0POT+F27Rf/QfpbFta1rPcw2Y7mbY2aD0s+AY3SEkIi4SwSAiLhLBICIuEsEgIi4SwSAiLhLBICIuEsEgIi4SwSAiLhLBICIuEsEgIi4SwSAiLhLBICIuEsEgIi4SwSAiLhLBICIuEsEgIi4SwSAiLhLBICIuEsEgIi4SwSAiLhLBICIuEsEgIi4SwSAiLhLBICIuEsEgIi4SwSAiLhLBICIuEsEgIi4SwSAiLhLBICIuEsEgIi8QHYt1LSGwCeCEAAAAASUVORK5CYII=";
const QUIZ_IMG  = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAABkCAIAAABM5OhcAAABe0lEQVR4nO3ZQWqDQABA0aa3q3ep25zBbQ6T83UhSEgKxuKnTX1vOcrg4jMzOKePz+kN9vb+2x/A/yQsEsIiISwSwiIhLBLCIiEsEsIiISwSwiKxW1jXy/l6Oe81G6/utHoJveQyjK6redZKWHNVwzjdrUbLyN2jOb7Hl3f8Yl7Ctq3w20SGcXocX0ZUdUzJ4f12PSvm5+9LwrrdJZ3oj+knh/etrVi3Dmg9rJmtjU2eDQs28eedhLBICIuEsEgIi4SwSAiLhLBICIuEsEgIi4SwSAiLhLBICIuEsEgIi4SwSAiLhLBICIuEsEgIi4SwSAiLhLBICIuEsEgIi4SwSAiLhLBICIuEsEgIi4SwSAiLhLBICIuEsEgIi4SwSAiLhLBICIuEsEgIi4SwSAiLhLBICIuEsEgIi4SwSAiLhLBICIuEsEgIi4SwSAiLhLBICIuEsEgIi8QHYt1LSGwCeCEAAAAASUVORK5CYII=";
const PLAYER_IMG = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAIAAAD/gAIDAAABcUlEQVR4nO3YQU7CQABAUTFeTu4iW87AlsNwPhckDaG17TMaqfy3IJPSJszPTKHs3j9OL1nn9a8/wJYUCxQLFAsUCxQLFAsUCxQLFAsUC7zpBZfzcRjvD8/1XLkQa5zm+np7/HmsWln7w+lyPl7Ox6+W0tDueubieLhkfPyR/cA9a5j2dTye81DkLtPd+PGtijU/pfUbc/Kc29394NZuw5l3JzfU5ObaRJEZu/l/SsdzXlxBdwtt8sLbmi/bibgQ69u2dTNaiX9nLdrQt5v6rZX1L/W4A4oFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigU+ARWTYc+RE36PAAAAAElFTkSuQmCC";

/* 
  ==== Base64 WAV í˜•íƒœë¡œ ë§Œë“  ì‘ì€ ë¹„í”„ìŒ 2ì¢… ====
  (ì§„ì§œ ìƒì¼ì¶•í•˜ ë…¸ë˜ê°€ ì•„ë‹Œ beep ì‚¬ìš´ë“œì´ë¯€ë¡œ, í•„ìš”í•˜ë©´ êµì²´í•˜ì„¸ìš”)
*/
const BIRTHDAY_SND = "data:audio/wav;base64,UklGRl4BAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YY4AAAD/AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA";
const EAT_SND      = "data:audio/wav;base64,UklGRl4BAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YY4AAAD/AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA";

/*
  Phaser ê²Œì„ ì„¤ì • (ì´ë¯¸ Phaser ì½”ë“œë¥¼ ìœ„ ìŠ¤í¬ë¦½íŠ¸ì— ì‚½ì…í–ˆìœ¼ë¯€ë¡œ, ì „ì—­ì— Phaserê°€ ì¡´ì¬)
*/
const config = {
  type: Phaser.AUTO,
  width: 800,
  height: 600,
  scene: [MainScene, CakeScene, QuizScene, MatchingGameScene, MultiplayerGameScene]
};
const game = new Phaser.Game(config);

/*
  ========= ì”¬(Scene) ì •ì˜ =========
*/
class MainScene extends Phaser.Scene {
  constructor() { super({ key: 'MainScene' }); }
  preload() {
    // house ì´ë¯¸ì§€, birthdaySong ì˜¤ë””ì˜¤(ì‹¤ì œë¡œëŠ” ë¹„í”„ìŒ)
    this.load.image('house', HOUSE_IMG);
    this.load.audio('birthdaySong', BIRTHDAY_SND);
  }
  create() {
    this.add.image(400, 300, 'house');
    let music = this.sound.add('birthdaySong');
    let startButton = this.add.text(300, 500, 'ë¬¸ ì—´ê¸° (í´ë¦­)', 
      { fontSize: '32px', fill: '#FFF' }
    ).setInteractive({ useHandCursor: true })
     .on('pointerdown', () => {
        music.play();
        startButton.setText('ìƒì¼ ì¶•í•˜ì†¡ ì¬ìƒ ì¤‘...');
        // ì‹¤ì œë¡  3ì´ˆ ì •ë„ë§Œ ëŒ€ê¸°
        setTimeout(() => this.scene.start('CakeScene'), 3000);
     });
  }
}

class CakeScene extends Phaser.Scene {
  constructor() { super({ key: 'CakeScene' }); }
  preload() {
    // cake ì´ë¯¸ì§€, eatSound ì˜¤ë””ì˜¤(ë¹„í”„ìŒ)
    this.load.image('cake', CAKE_IMG);
    this.load.audio('eatSound', EAT_SND);
  }
  create() {
    this.add.image(400, 300, 'cake');
    let eatSound = this.sound.add('eatSound');
    let eatButton = this.add.text(300, 500, 'ì¼€ì´í¬ ë¨¹ê¸° (í´ë¦­)', 
      { fontSize: '32px', fill: '#FFF' }
    ).setInteractive({ useHandCursor: true })
     .on('pointerdown', () => {
       eatSound.play();
       eatButton.setText('ëƒ ëƒ ! ì¼€ì´í¬ë¥¼ ë¨¹ì—ˆì–´ìš”!');
       setTimeout(() => this.scene.start('QuizScene'), 2000);
     });
  }
}

class QuizScene extends Phaser.Scene {
  constructor() { super({ key: 'QuizScene' }); }
  preload() {
    this.load.image('quizBg', QUIZ_IMG);
  }
  create() {
    this.add.image(400, 300, 'quizBg');
    let question = this.add.text(180, 200, 'ìƒì¼ì€ 1ë…„ì— ëª‡ ë²ˆ ìˆì„ê¹Œìš”?', 
      { fontSize: '24px', fill: '#FFF' }
    );
    let answer1 = this.add.text(180, 300, 'A: í•œ ë²ˆ', 
      { fontSize: '20px', fill: '#FFF' }
    ).setInteractive({ useHandCursor: true })
     .on('pointerdown', () => this.showResult(true));
    let answer2 = this.add.text(180, 350, 'B: ë‘ ë²ˆ', 
      { fontSize: '20px', fill: '#FFF' }
    ).setInteractive({ useHandCursor: true })
     .on('pointerdown', () => this.showResult(false));
  }
  showResult(isCorrect) {
    let resultText = isCorrect ? 'ì •ë‹µ! ğŸ‰' : 'í‹€ë ¸ì–´ìš” ğŸ˜…';
    this.add.text(180, 450, resultText, { fontSize: '24px', fill: '#FFF' });
    setTimeout(() => this.scene.start('MatchingGameScene'), 2000);
  }
}

class MatchingGameScene extends Phaser.Scene {
  constructor() { super({ key: 'MatchingGameScene' }); }
  preload() {
    // ì—¬ê¸°ì„œëŠ” 2ì¢…ë¥˜ ì¹´ë“œ + ë’·ë©´(ì´ 3ê°œ)ì˜ ì´ë¯¸ì§€ë¥¼ ì „ë¶€ ì´ë¯¸ ê°–ê³  ìˆìŒ
    this.load.image('card1', PLAYER_IMG); // ì¹´ë“œ1
    this.load.image('card2', CAKE_IMG);   // ì¹´ë“œ2
    this.load.image('back', HOUSE_IMG);   // ë’¤ì§‘íŒ ì¹´ë“œ
  }
  create() {
    // 4ì¥(2ìŒ) ì¹´ë“œë¥¼ ì„ì–´ì„œ ë°°ì¹˜
    let cards = [
      { key: 'card1', matched: false },
      { key: 'card1', matched: false },
      { key: 'card2', matched: false },
      { key: 'card2', matched: false }
    ];
    Phaser.Utils.Array.Shuffle(cards);

    let positions = [200, 350, 500, 650];
    let selectedCards = [];

    cards.forEach((card, i) => {
      let cardSprite = this.add.image(positions[i], 300, 'back')
        .setInteractive({ useHandCursor: true })
        .on('pointerdown', () => this.flipCard(cardSprite, card, selectedCards));
      card.sprite = cardSprite;
    });
  }

  flipCard(sprite, card, selectedCards) {
    if (selectedCards.length < 2 && !card.matched) {
      sprite.setTexture(card.key);
      selectedCards.push({ sprite, card });
    }
    if (selectedCards.length === 2) {
      // 1ì´ˆ ê¸°ë‹¤ë ¸ë‹¤ê°€ ë§¤ì¹­ ì—¬ë¶€ ê²€ì‚¬
      setTimeout(() => {
        if (selectedCards[0].card.key === selectedCards[1].card.key) {
          // ë§¤ì¹­ ì„±ê³µ
          selectedCards[0].card.matched = true;
          selectedCards[1].card.matched = true;
        } else {
          // ë‹¤ì‹œ ë’¤ì§‘ê¸°
          selectedCards[0].sprite.setTexture('back');
          selectedCards[1].sprite.setTexture('back');
        }
        selectedCards.length = 0;
        // ëª¨ë“  ì¹´ë“œê°€ ë‹¤ ë§ì¶°ì¡ŒëŠ”ì§€ ì²´í¬
        if (this.checkAllMatched()) {
          this.add.text(280, 500, 'ì¹´ë“œ ë§¤ì¹­ ì™„ë£Œ!', { fontSize: '28px', fill: '#FFF' });
          setTimeout(() => this.scene.start('MultiplayerGameScene'), 2000);
        }
      }, 1000);
    }
  }
  checkAllMatched() {
    // ì”¬ì— ìˆëŠ” image ì¤‘, 'back'ì´ ì•„ë‹Œ í…ìŠ¤ì²˜ê°€ 4ì¥ ìˆìœ¼ë©´ ì „ë¶€ ë§ì¶˜ ìƒíƒœ
    let matchedCount = 0;
    this.children.list.forEach(obj => {
      if (obj.texture && obj.texture.key !== 'back') matchedCount++;
    });
    return matchedCount === 4;
  }
}

class MultiplayerGameScene extends Phaser.Scene {
  constructor() { super({ key: 'MultiplayerGameScene' }); }
  preload() {
    // 2ëª… í”Œë ˆì´ì–´ ëª¨ë‘ ê°™ì€ ì´ë¯¸ì§€
    this.load.image('player', PLAYER_IMG);
  }
  create() {
    this.add.text(250, 100, 'ë©€í‹°í”Œë ˆì´ ë¯¸ë‹ˆê²Œì„!', 
      { fontSize: '32px', fill: '#FFF' }
    );
    let player1 = this.add.image(200, 300, 'player');
    let player2 = this.add.image(600, 300, 'player');

    let p1Button = this.add.text(150, 500, 'í”Œë ˆì´ì–´ 1 ì í”„', 
      { fontSize: '24px', fill: '#FFF' }
    ).setInteractive({ useHandCursor: true })
     .on('pointerdown', () => { player1.y -= 50; });

    let p2Button = this.add.text(550, 500, 'í”Œë ˆì´ì–´ 2 ì í”„', 
      { fontSize: '24px', fill: '#FFF' }
    ).setInteractive({ useHandCursor: true })
     .on('pointerdown', () => { player2.y -= 50; });
  }
}
</script>
</body>
</html>
